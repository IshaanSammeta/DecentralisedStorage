<!DOCTYPE html>
<html>
<head>
    <title>File Upload/Download</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style5.css') }}">
</head>
<body>
    <h2>File Upload/Download</h2>
    <ul>
        {% with messages = get_flashed_messages(with_categories=true) %}
            {% for category, message in messages %}
                <li class="{{ category }}">{{ message }}</li>
            {% endfor %}
        {% endwith %}
    </ul>
    <a href="{{ url_for('logout') }}">Logout</a><br><br>
    <form method="POST" action="/upload" enctype="multipart/form-data">
        <input type="file" name="file" accept=".txt, .pdf">
        <input type="text" name="key" placeholder="Encryption Key"> <!-- Input field for encryption key -->
        <input type="submit" value="Upload File">
    </form>
    <h3>Uploaded Files:</h3>
    <ul>
        {% for encrypted_hash in encrypted_hashes %}
            <li>
                <a href="#">{{ encrypted_hash }}</a>
                <form method="POST" action="{{ url_for('remove', encrypted_hash=encrypted_hash) }}" style="display:inline;">
                    <input type="submit" value="Remove">
                </form>
            </li>
        {% endfor %}
    </ul>
    <h3>Decrypt Hash:</h3>
    <form method="POST" action="/decrypt">
        <input type="text" name="encrypted_hash" placeholder="Encrypted Hash">
        <input type="text" name="key" placeholder="Decryption Key">
        <input type="submit" value="Decrypt">
    </form>
    {% if decrypted_hash %}
        <p>Decrypted Hash: {{ decrypted_hash }}</p>
    {% endif %}
</body>
</html>
